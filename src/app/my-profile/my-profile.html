<app-nav-tabs [tabs]="buytabs"></app-nav-tabs>

<div class="profile-container" *ngIf="profileData">
  <div class="profile-header">
    <div class="avatar">{{ profileData.user?.username?.charAt(0) || '?' }}</div>
    <div class="user-info">
      <div class="email">{{ profileData.user?.email }}</div>
      <div class="status">ğŸŸ¢ Äang online</div>
      <div class="verify">
        <span *ngIf="profileData.user?.isVerified">âœ” ÄÃ£ xÃ¡c minh giáº¥y tá» tÃ¹y thÃ¢n</span>
        <span>âœ” Äiá»‡n thoáº¡i di Ä‘á»™ng</span>
        <span>âœ” Email</span>
      </div>
      <div class="country">ğŸ‡»ğŸ‡³ {{ profileData.user?.nation }} &nbsp;|&nbsp; ÄÃ£ tham gia vÃ o: {{
        profileData.user?.createdAt | date:'dd/MM/yyyy' }}</div>
    </div>
    <button class="share-btn">ğŸ“¤ Chia sáº»</button>
  </div>

  <div class="assets-section">
    <div class="asset-box">
      <div class="title">TÃ i sáº£n cá»§a tÃ´i</div>
      <div class="value">
        <div class="value-left">
          <div class="available">
            <span class="available-dot">â—</span> Kháº£ dá»¥ng
          </div>
          <div class="amount">{{ profileData.fundingWallet?.balance | number:'1.2-2' }} USDT</div>
        </div>

        <div class="vertical-line"></div>

        <div class="value-right">
          <div class="locked">
            <span class="locked-dot">â—</span> ÄÃ£ khÃ³a
          </div>
          <div class="amount">{{ profileData.fundingWallet?.lockedBalance | number:'1.2-2' }} USDT</div>
        </div>
      </div>
    </div>
  </div>

  <div class="stats-section">
    <div class="box">
      <h3>30 ngÃ y</h3>

      <div class="line-item">
        <span>Lá»‡nh Ä‘Ã£ hoÃ n táº¥t (30D)</span>
        <span class="stat-value">{{ profileData.stats30Days?.completedOrders || 0 }}</span>
      </div>

      <div class="line-item">
        <span>ğŸŸ¢ Mua</span>
        <span class="stat-value">{{ profileData.stats30Days?.buyOrders || 0 }}</span>
      </div>
      <div class="line-item">
        <span>ğŸ”´ BÃ¡n</span>
        <span class="stat-value">{{ profileData.stats30Days?.sellOrders || 0 }}</span>
      </div>

      <div class="line-item">
        <span>Tá»· lá»‡ hoÃ n táº¥t (30D)</span>
        <span class="stat-value">{{ profileData.stats30Days?.completionRate | number:'1.2-2' }}%</span>
      </div>

      <div class="line-item">
        <span>ğŸŸ¢ Mua</span>
        <span class="stat-value">0,00%</span>
      </div>
      <div class="line-item">
        <span>ğŸ”´ BÃ¡n</span>
        <span class="stat-value">0,00%</span>
      </div>

      <div class="line-item">
        <span>Sá»‘ ngÆ°á»i dÃ¹ng giao dá»‹ch</span>
        <span class="stat-value">{{ profileData.stats30Days?.uniqueTraders || 0 }}</span>
      </div>
    </div>

    <div class="vertical-line"></div>

    <div class="box">
      <h3>Tá»•ng cá»™ng</h3>

      <div class="line-item">
        <span>Tá»•ng sá»‘ lá»‡nh Ä‘Ã£ hoÃ n táº¥t</span>
        <span class="stat-value">{{ profileData.statsAllTime?.completedOrders || 0 }}</span>
      </div>

      <div class="line-item">
        <span>Tá»•ng giÃ¡ trá»‹ (USD)</span>
        <span class="stat-value">{{ profileData.statsAllTime?.totalValueUsd | number:'1.2-2' }}</span>
      </div>

      <div class="line-item">
        <span>Tá»•ng tá»· lá»‡ hoÃ n táº¥t</span>
        <span class="stat-value">{{ profileData.statsAllTime?.completionRate | number:'1.2-2' }}%</span>
      </div>

      <div class="line-item">
        <span>Thá»i gian thanh toÃ¡n TB</span>
        <span class="stat-value">{{ profileData.statsAllTime?.avgPaymentTimeSeconds || 0 }}s</span>
      </div>
    </div>

    <div class="vertical-line"></div>

    <div class="box">
      <h3>Há»“ sÆ¡</h3>

      <div class="line-item">
        <span>Tá»· lá»‡ Ä‘Ã¡nh giÃ¡ tÃ­ch cá»±c</span>
        <span class="stat-value">{{ profileData.reputation?.positiveRate | number:'1.2-2' }}%</span>
      </div>

      <div class="line-item">
        <span>ğŸŸ¢ ÄÃ¡nh giÃ¡ tÃ­ch cá»±c</span>
        <span class="stat-value">{{ profileData.reputation?.positiveReviews || 0 }}</span>
      </div>

      <div class="line-item">
        <span>ğŸ”´ ÄÃ¡nh giÃ¡ tiÃªu cá»±c</span>
        <span class="stat-value">{{ profileData.reputation?.negativeReviews || 0 }}</span>
      </div>

      <div class="line-item">
        <span>NgÆ°á»i theo dÃµi</span>
        <span class="stat-value">{{ profileData.reputation?.followers || 0 }}</span>
      </div>

      <div class="line-item">
        <span>Cháº·n bá»Ÿi</span>
        <span class="stat-value">{{ profileData.reputation?.blockedBy || 0 }}</span>
      </div>
    </div>
  </div>

  <div class="settings-section">
    <!-- Tabs -->
    <div class="tabs">
      <div [class.active]="tab === 'setting'" (click)="setTab('setting')">CÃ i Ä‘áº·t</div>
      <div [class.active]="tab === 'evaluate'" (click)="setTab('evaluate')">ÄÃ¡nh giÃ¡</div>
    </div>

    <div *ngIf="tab === 'setting'">
      <!-- Máº­t kháº©u & Báº£o máº­t -->
      <div class="setting-box">
        <div class="setting-title">Máº­t kháº©u & Báº£o máº­t</div>
        <div class="setting-item">
          <div class="setting-label">
            <div class="item-title">TÃ¹y chá»n mÃ£ xÃ¡c minh</div>
            <div class="item-desc">Chá»n táº§n suáº¥t Ä‘á»ƒ chÃºng tÃ´i yÃªu cáº§u báº¡n nháº­p mÃ£ xÃ¡c minh trÆ°á»›c khi tiáº¿n hÃ nh giao
              dá»‹ch. MÃ£ cÃ³ thá»ƒ Ä‘Æ°á»£c gá»­i qua email, SMS hoáº·c á»©ng dá»¥ng xÃ¡c thá»±c.</div>
          </div>
          <div class="setting-action">LuÃ´n luÃ´n &gt;</div>
        </div>
      </div>

      <!-- Quáº£n lÃ½ phÆ°Æ¡ng thá»©c thanh toÃ¡n -->
      <div class="setting-box">
        <div class="setting-title">Quáº£n lÃ½ phÆ°Æ¡ng thá»©c thanh toÃ¡n</div>

        <div class="payment-actions">
          <select class="filter-dropdown">
            <option>Táº¥t cáº£</option>
          </select>
          <input class="search-input" placeholder="TÃ¬m theo tÃªn hoáº·c sá»‘ tÃ i khoáº£n cá»§a chá»§ tÃ i khoáº£n" />
          <button class="add-method-btn">ï¼‹ ThÃªm phÆ°Æ¡ng thá»©c thanh toÃ¡n</button>
        </div>

        <div class="warning-box">
          âš ï¸ Báº¡n cáº§n nháº­p thÃ´ng tin tÃ i khoáº£n cá»§a mÃ¬nh khi thiáº¿t láº­p phÆ°Æ¡ng thá»©c thanh toÃ¡n. KhÃ´ng thá»ƒ sá»­ dá»¥ng tÃ i khoáº£n
          cá»§a bÃªn thá»© 3 Ä‘á»ƒ giao dá»‹ch P2P vÃ  hÃ nh Ä‘á»™ng Ä‘Ã³ cÃ³ thá»ƒ khiáº¿n lá»‡nh bá»‹ huá»·.
        </div>

        <div class="empty-payment">
          <div class="empty-icon">ğŸ“„</div>
          <div class="empty-title">Báº¡n chÆ°a thÃªm phÆ°Æ¡ng thá»©c thanh toÃ¡n nÃ o</div>
          <div class="empty-desc">HÃ£y dÃ¹ng tÃªn tháº­t Ä‘á»ƒ thÃªm phÆ°Æ¡ng thá»©c thanh toÃ¡n.</div>
        </div>
      </div>

      <!-- Tabs theo dÃµi -->
      <div class="follow-section">
        <!-- Tabs -->
        <div class="follow-tabs">
          <div [class.active]="followTab === 'following'" (click)="setFollowTab('following')">Äang theo dÃµi</div>
          <div [class.active]="followTab === 'blocked'" (click)="setFollowTab('blocked')">ÄÃ£ cháº·n</div>
          <div [class.active]="followTab === 'reported'" (click)="setFollowTab('reported')">ÄÃ£ bÃ¡o cÃ¡o</div>
        </div>

        <!-- Tab: Äang theo dÃµi -->
        <div *ngIf="followTab === 'following'">
          <div class="follow-table-header">
            <span>TÃªn ngÆ°á»i dÃ¹ng</span>
            <span>XÃ¡c minh danh tÃ­nh</span>
            <span>NgÃ y Ä‘Äƒng kÃ½</span>
            <span>HÃ nh Ä‘á»™ng</span>
          </div>
          <div class="follow-empty">
            <div class="icon">ğŸ“„</div>
            <div class="title">Báº¡n chÆ°a theo dÃµi báº¥t ká»³ ai</div>
            <div class="desc">Theo dÃµi NhÃ  quáº£ng cÃ¡o Ä‘á»ƒ dá»… tÃ¬m tháº¥y há» hÆ¡n.</div>
          </div>
        </div>

        <!-- Tab: ÄÃ£ cháº·n -->
        <div *ngIf="followTab === 'blocked'">
          <div class="blocked-tools">
            <input class="search-id" placeholder="ğŸ” Nháº­p ID ngÆ°á»i dÃ¹ng" />
          </div>
          <div class="follow-table-header blocked-table-header">
            <span>UID</span>
            <span>TÃªn Ä‘áº§y Ä‘á»§ (Lá»‡nh / Tá»· lá»‡ hoÃ n thÃ nh)</span>
            <span>Thá»i gian thanh toÃ¡n trung bÃ¬nh</span>
            <span>Thá»i gian trung bÃ¬nh má»Ÿ khÃ³a crypto</span>
            <span>NgÃ y cháº·n</span>
            <span>HÃ nh Ä‘á»™ng</span>
          </div>
          <div class="follow-empty">
            <div class="icon">ğŸ“„</div>
            <div class="title">Báº¡n chÆ°a cháº·n báº¥t ká»³ ai</div>
            <div class="desc">Cháº·n NhÃ  quáº£ng cÃ¡o Ä‘á»ƒ dá»«ng xem quáº£ng cÃ¡o cá»§a há».</div>
          </div>
        </div>

        <!-- Tab: ÄÃ£ bÃ¡o cÃ¡o -->
        <div *ngIf="followTab === 'reported'" class="report-section">
          <div class="reported-tools">
            <button class="report-btn">ï¼‹ BÃ¡o cÃ¡o ngÆ°á»i dÃ¹ng</button>
          </div>
          <div class="report-header report-table-header">
            <span>TÃªn ngÆ°á»i dÃ¹ng</span>
            <span>ÄÃ£ bÃ¡o cÃ¡o vÃ o</span>
            <span>Tráº¡ng thÃ¡i</span>
          </div>

          <div class="follow-empty">
            <div class="icon">ğŸ“„</div>
            <div class="title">KhÃ´ng tÃ¬m tháº¥y bÃ¡o cÃ¡o</div>
          </div>
        </div>
      </div>


      <!-- API P2P -->
      <div class="api-box">
        <div class="api-title">API P2P</div>
        <div class="api-desc">Táº¡o vÃ  quáº£n lÃ½ mÃ£ API P2P Ä‘á»ƒ tÃ¹y chá»‰nh tráº£i nghiá»‡m giao dá»‹ch P2P cá»§a báº¡n.
          <span class="api-arrow">â€º</span>
        </div>
      </div>
    </div>

    <div class="review-section" *ngIf="tab === 'evaluate'">
      <!-- Tá»•ng quan Ä‘Ã¡nh giÃ¡ -->
      <div class="review-summary">
        <div class="summary-item">
          <div class="value">0</div>
          <div class="label">Tá»•ng sá»‘ Ä‘Ã¡nh giÃ¡</div>
        </div>
        <div class="summary-item">
          <div class="value">NA</div>
          <div class="label">Tá»· lá»‡ Ä‘Ã¡nh giÃ¡ tÃ­ch cá»±c</div>
        </div>
      </div>

      <!-- Tabs: Tá»« ngÆ°á»i mua / ngÆ°á»i bÃ¡n -->
      <div class="review-tabs">
        <div [class.active]="reviewTab === 'buyer'" (click)="setReviewTab('buyer')">
          Tá»« ngÆ°á»i mua (0)
        </div>
        <div [class.active]="reviewTab === 'seller'" (click)="setReviewTab('seller')">
          Tá»« ngÆ°á»i bÃ¡n (0)
        </div>
      </div>

      <!-- Bá»™ lá»c -->
      <div class="review-filters">
        <label><input type="checkbox" [(ngModel)]="hasComment" /> CÃ³ bÃ¬nh luáº­n</label>
        <div class="filter-tags">
          <div [class.active]="filter === 'all'" (click)="setFilter('all')">Táº¥t cáº£</div>
          <div [class.active]="filter === 'positive'" (click)="setFilter('positive')">TÃ­ch cá»±c</div>
          <div [class.active]="filter === 'negative'" (click)="setFilter('negative')">TiÃªu cá»±c</div>
        </div>
      </div>

      <!-- Tráº¡ng thÃ¡i rá»—ng -->
      <div class="follow-empty">
        <div class="icon">ğŸ“„</div>
        <div class="title">KhÃ´ng cÃ³ Ä‘Ã¡nh giÃ¡</div>
      </div>
    </div>

  </div>

</div>